# RAG¬†Microservice

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ (Retrieval‚ÄëAugmented Generation, **RAG**).

## üöÄ¬†–ë—ã—Å—Ç—Ä—ã–π¬†—Å—Ç–∞—Ä—Ç

```bash
git clone https://github.com/Finshem/RAG-microservice.git
cd rag_microservice

cp .env.example .env       
docker compose up --build  
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Swagger¬†UI –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É <http://localhost:8000/docs>.

## üìñ¬†–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è¬†API

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| `POST` | `/api/search_data` | –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ. |
| `POST` | `/api/chat_llm` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤. |

<details>
<summary>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</summary>

### `/api/search_data`

**Request**

- –§–∞–π–ª: `example.pdf`
- –¢–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞: `–ö–∞–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ RAG?`

**Response**

```json
[
  {
    "chunk": "–í RAG –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ NLP –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.",
    "cosine_distance": 0.123,
    "semantic_metric": 0.876
  }
]
```

### `/api/chat_llm`

**Request**

- –§–∞–π–ª: `example.txt`
- –¢–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞: `–û–±—ä—è—Å–Ω–∏ –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã RAG.`
- –ü—Ä–æ–º–ø—Ç: `–û—Ç–≤–µ—Ç—å –∫–∞–∫ —ç–∫—Å–ø–µ—Ä—Ç –≤ –æ–±–ª–∞—Å—Ç–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.`

**Response**

```json
{
  "response": "RAG ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤."
}
```

</details>

## ‚öôÔ∏è¬†–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ¬†–æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ      | –ü—Ä–∏–º–µ—Ä   |
|---------------------|-----------------|----------|
| `OPENAI_API_KEY`    | –ö–ª—é—á¬†OpenAI     | `sk-‚Ä¶`   |

## üß™¬†–¢–µ—Å—Ç–æ–≤—ã–π¬†—Ä–µ–∂–∏–º

–ü–æ¬†—É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤¬†offline‚Äë—Ä–µ–∂–∏–º–µ: –≤–º–µ—Å—Ç–æ OpenAI –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –º–æ–∫–∏ (—Å–º. `services/embedder.py`, `api/chat.py`).
–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π LLM, –∑–∞–¥–∞–π—Ç–µ `OPENAI_API_KEY` –≤¬†`.env`.

## üõ†Ô∏è¬†–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
python -m venv venv && source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

