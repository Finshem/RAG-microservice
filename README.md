# README.md ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

# RAG Microservice

## üìå –û–ø–∏—Å–∞–Ω–∏–µ
–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ FastAPI, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π Retrieval-Augmented Generation (RAG) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏–∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (—Ç–µ–∫—Å—Ç + —Ç–∞–±–ª–∏—Ü—ã) –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

---

## üöÄ –ó–∞–ø—É—Å–∫
```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
https://github.com/Finshem/RAG-microservice.git

# 2. –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd RAG-microservice

# 3. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å
docker compose up -d
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```env
OPENAI_API_URL=https://api.openai.com/v1/chat/completions
OPENAI_API_KEY=your_token_here
MODEL=gpt-4o
TEMPERATURE=0.7
MAX_TOKENS=512
```

---

## üìÇ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- .pdf
- .txt
- .html
- .csv
- .xlsx

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞: 100MB**

---

## üìò –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîç `/api/search_data/` ‚Äî –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç **–æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ** —Ñ–∞–π–ª–æ–≤
- –î–µ–ª–∞–µ—Ç **–≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É (FAISS)**
- –î–µ–ª–∞–µ—Ç **–∫–ª—é—á–µ–≤–æ–π –ø–æ–∏—Å–∫ –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º**

**Request:**
```http
POST /api/search_data/
Content-Type: multipart/form-data

- files: [UploadFile, UploadFile, ...]
- query: —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
```

**Response:**
```json
[
  {
    "chunk": "...",
    "score": 0.912,
    "type": "text",
    "source": "report.pdf"
  },
  {
    "chunk": "row1 | row2 | ...",
    "score": 1.0,
    "type": "table",
    "source": "data.xlsx"
  }
]
```

---

### üí¨ `/api/chat_llm/` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç LLM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –¥–æ–±–∞–≤–ª—è–µ—Ç top-N —á–∞–Ω–∫–æ–≤ –∫ –ø—Ä–æ–º–ø—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ OpenAI.

---

## üß™ –ü—Ä–∏–º–µ—Ä CURL-–∑–∞–ø—Ä–æ—Å–∞
```bash
curl -X POST http://localhost:8000/api/search_data/ \
  -F "files=@example.pdf" \
  -F "files=@report.xlsx" \
  -F "query=–ö–∞–∫–æ–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –≤ 2025 –≥–æ–¥—É?"
```

---

## ü™µ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- stdout: INFO, DEBUG, ERROR
- —Ñ–∞–π–ª: `app.log`

---

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¢–ó –ø–æ–∫—Ä—ã—Ç—ã:
- [x] –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫: —Ç–µ–∫—Å—Ç + —Ç–∞–±–ª–∏—Ü—ã
- [x] FAISS –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞
- [x] –ú—É–ª—å—Ç–∏–¥–æ–∫—É–º–µ–Ω—Ç–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- [x] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ä–∞–∑–º–µ—Ä—É
- [x] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/search_data/`, `/chat_llm/`
- [x] –î–æ–∫–µ—Ä, .env, README

---

## üß† –í –ø–ª–∞–Ω–∞—Ö
- –†–µ—Ä–∞–Ω–≥–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LLM –±–µ–∑ OpenAI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)